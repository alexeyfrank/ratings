2014-11-15 15:22:50 =ERROR REPORT====
Error in process <0.406.0> with exit value: {[{reason,undef},{mfa,{user_handler,init,2}},{stacktrace,[{user_handler,init,[{http_req,#Port<0.4948>,ranch_tcp,keepalive,<0.406.0>,<<3 bytes>>,'HTTP/1.1',{{127,0,0,1},57927},<<9 bytes>>,undefined,8008,<<12 bytes>>,undefined,<<0 bytes>>,[{id,<<1 byte>>}],[{<<10 bytes>>,<<11 bytes>>},{<<4 bytes>>,<<14 bytes>>},{<<6 bytes>>,<<3 bytes>>}],[],waiting,<<0 bytes>>,undefined,false,waiting,[],<<0 bytes>>,undefined... 

2014-11-15 15:22:50 =ERROR REPORT====
Ranch listener http_listener had connection process started with cowboy_protocol:start_link/4 at <0.406.0> exit with reason: {[{reason,undef},{mfa,{user_handler,init,2}},{stacktrace,[{user_handler,init,[{http_req,#Port<0.4948>,ranch_tcp,keepalive,<0.406.0>,<<"PUT">>,'HTTP/1.1',{{127,0,0,1},57927},<<"localhost">>,undefined,8008,<<"/api/users/1">>,undefined,<<>>,[{id,<<"1">>}],[{<<"user-agent">>,<<"curl/7.37.1">>},{<<"host">>,<<"localhost:8008">>},{<<"accept">>,<<"*/*">>}],[],waiting,<<>>,undefined,false,waiting,[],<<>>,undefined},[]],[]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,39}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]},{req,[{socket,#Port<0.4948>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.406.0>},{method,<<"PUT">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},57927}},{host,<<"localhost">>},{host_info,undefined},{port,8008},{path,<<"/api/users/1">>},{path_info,undefined},{qs,<<>>},{bindings,[{id,<<"1">>}]},{headers,[{<<"user-agent">>,<<"curl/7.37.1">>},{<<"host">>,<<"localhost:8008">>},{<<"accept">>,<<"*/*">>}]},{meta,[]},{body_state,waiting},{buffer,<<>>},{multipart,undefined},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}],[{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]}
2014-11-15 15:27:14 =ERROR REPORT====
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:52: Warning: variable 'UserId' is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:0: Recompiled with 1 warnings
2014-11-15 15:29:44 =ERROR REPORT====
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:52: Warning: variable 'UserId' is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:0: Recompiled with 1 warnings
2014-11-15 15:30:00 =ERROR REPORT====
Error in process <0.123.0> with exit value: {[{reason,undef},{mfa,{user_handler,init,2}},{stacktrace,[{user_handler,init,[{http_req,#Port<0.4401>,ranch_tcp,keepalive,<0.123.0>,<<3 bytes>>,'HTTP/1.1',{{127,0,0,1},58021},<<9 bytes>>,undefined,8008,<<12 bytes>>,undefined,<<0 bytes>>,[{id,<<1 byte>>}],[{<<10 bytes>>,<<11 bytes>>},{<<4 bytes>>,<<14 bytes>>},{<<6 bytes>>,<<3 bytes>>}],[],waiting,<<0 bytes>>,undefined,false,waiting,[],<<0 bytes>>,undefined... 

2014-11-15 15:30:00 =ERROR REPORT====
Ranch listener http_listener had connection process started with cowboy_protocol:start_link/4 at <0.123.0> exit with reason: {[{reason,undef},{mfa,{user_handler,init,2}},{stacktrace,[{user_handler,init,[{http_req,#Port<0.4401>,ranch_tcp,keepalive,<0.123.0>,<<"PUT">>,'HTTP/1.1',{{127,0,0,1},58021},<<"localhost">>,undefined,8008,<<"/api/users/1">>,undefined,<<>>,[{id,<<"1">>}],[{<<"user-agent">>,<<"curl/7.37.1">>},{<<"host">>,<<"localhost:8008">>},{<<"accept">>,<<"*/*">>}],[],waiting,<<>>,undefined,false,waiting,[],<<>>,undefined},[]],[]},{cowboy_handler,execute,2,[{file,"src/cowboy_handler.erl"},{line,39}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]},{req,[{socket,#Port<0.4401>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.123.0>},{method,<<"PUT">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},58021}},{host,<<"localhost">>},{host_info,undefined},{port,8008},{path,<<"/api/users/1">>},{path_info,undefined},{qs,<<>>},{bindings,[{id,<<"1">>}]},{headers,[{<<"user-agent">>,<<"curl/7.37.1">>},{<<"host">>,<<"localhost:8008">>},{<<"accept">>,<<"*/*">>}]},{meta,[]},{body_state,waiting},{buffer,<<>>},{multipart,undefined},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{opts,[]}],[{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]}
2014-11-15 15:30:13 =ERROR REPORT====
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:52: Warning: variable 'UserId' is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:0: Recompiled with 1 warnings
2014-11-15 15:30:31 =ERROR REPORT====
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:52: Warning: variable 'UserId' is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:0: Recompiled with 1 warnings
2014-11-15 15:31:12 =ERROR REPORT====
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:52: Warning: variable 'UserId' is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:0: Recompiled with 1 warnings
2014-11-15 15:31:22 =ERROR REPORT====
Error in process <0.605.0> with exit value: {undef,[{upgrade,upgrade,[protocol,[{handler,user_handler},{handler_opts,[]},{listener,http_listener},{dispatch,[{'_',[],[{[<<3 bytes>>,<<5 bytes>>,id],[],user_handler,[]}]}]}],user_handler,cowboy_rest,infinity,run],[]},{cowboy_protocol,execute,4,... 

2014-11-15 15:31:22 =ERROR REPORT====
Ranch listener http_listener had connection process started with cowboy_protocol:start_link/4 at <0.605.0> exit with reason: {undef,[{upgrade,upgrade,[protocol,[{handler,user_handler},{handler_opts,[]},{listener,http_listener},{dispatch,[{'_',[],[{[<<"api">>,<<"users">>,id],[],user_handler,[]}]}]}],user_handler,cowboy_rest,infinity,run],[]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]}
2014-11-15 15:34:15 =ERROR REPORT====
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:52: Warning: variable 'UserId' is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:0: Recompiled with 1 warnings
2014-11-15 15:35:43 =ERROR REPORT====
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:49: Warning: variable 'UserId' is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:0: Recompiled with 1 warnings
2014-11-15 15:36:01 =ERROR REPORT====
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:49: Warning: variable 'UserId' is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:0: Recompiled with 1 warnings
2014-11-15 15:37:02 =ERROR REPORT====
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:31: Warning: variable 'Method' is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:44: Warning: function resource_exists/2 is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:45: Warning: variable 'UserId' is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:48: Warning: function allow_missing_post/2 is unused
/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl:0: Recompiled with 1 warnings
2014-11-15 15:38:05 =ERROR REPORT====
Error in process <0.1643.0> with exit value: {[{reason,{badmatch,<<4 bytes>>}},{mfa,{user_handler,content_types_provided,2}},{stacktrace,[{user_handler,content_types_provided,2,[{file,"/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user... 

2014-11-15 15:38:05 =ERROR REPORT====
Ranch listener http_listener had connection process started with cowboy_protocol:start_link/4 at <0.1643.0> exit with reason: {[{reason,{badmatch,<<"POST">>}},{mfa,{user_handler,content_types_provided,2}},{stacktrace,[{user_handler,content_types_provided,2,[{file,"/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl"},{line,31}]},{cowboy_rest,call,3,[{file,"src/cowboy_rest.erl"},{line,952}]},{cowboy_rest,content_types_provided,2,[{file,"src/cowboy_rest.erl"},{line,200}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]},{req,[{socket,#Port<0.5300>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.1643.0>},{method,<<"POST">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},58135}},{host,<<"localhost">>},{host_info,undefined},{port,8008},{path,<<"/api/users/1">>},{path_info,undefined},{qs,<<>>},{bindings,[{id,<<"1">>}]},{headers,[{<<"user-agent">>,<<"curl/7.37.1">>},{<<"host">>,<<"localhost:8008">>},{<<"accept">>,<<"*/*">>}]},{meta,[]},{body_state,waiting},{buffer,<<>>},{multipart,undefined},{resp_compress,false},{resp_state,waiting},{resp_headers,[]},{resp_body,<<>>},{onresponse,undefined}]},{state,[]}],[{cowboy_rest,content_types_provided,2,[{file,"src/cowboy_rest.erl"},{line,200}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]}
2014-11-15 15:51:10 =ERROR REPORT====
Error in process <0.307.0> with exit value: {[{reason,{badmatch,<<1 byte>>}},{mfa,{user_handler,add_user_score,2}},{stacktrace,[{user_handler,add_user_score,2,[{file,"/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl"},{line... 

2014-11-15 15:51:10 =ERROR REPORT====
Ranch listener http_listener had connection process started with cowboy_protocol:start_link/4 at <0.307.0> exit with reason: {[{reason,{badmatch,<<"1">>}},{mfa,{user_handler,add_user_score,2}},{stacktrace,[{user_handler,add_user_score,2,[{file,"/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl"},{line,28}]},{cowboy_rest,call,3,[{file,"src/cowboy_rest.erl"},{line,952}]},{cowboy_rest,process_content_type,3,[{file,"src/cowboy_rest.erl"},{line,753}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]},{req,[{socket,#Port<0.4684>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.307.0>},{method,<<"PUT">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},58288}},{host,<<"127.0.0.1">>},{host_info,undefined},{port,8008},{path,<<"/api/users/1">>},{path_info,undefined},{qs,<<>>},{bindings,[{id,<<"1">>}]},{headers,[{<<"user-agent">>,<<"curl/7.37.1">>},{<<"host">>,<<"127.0.0.1:8008">>},{<<"accept">>,<<"*/*">>},{<<"content-type">>,<<"application/json">>}]},{meta,[{media_type,{<<"application">>,<<"json">>,[]}},{charset,undefined}]},{body_state,waiting},{buffer,<<>>},{multipart,undefined},{resp_compress,false},{resp_state,waiting},{resp_headers,[{<<"content-type">>,[<<"application">>,<<"/">>,<<"json">>,<<>>]}]},{resp_body,<<>>},{onresponse,undefined}]},{state,[]}],[{cowboy_rest,process_content_type,3,[{file,"src/cowboy_rest.erl"},{line,753}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]}
2014-11-15 15:53:28 =ERROR REPORT====
Error in process <0.120.0> with exit value: {[{reason,{badmatch,<<1 byte>>}},{mfa,{user_handler,add_user_score,2}},{stacktrace,[{user_handler,add_user_score,2,[{file,"/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl"},{line... 

2014-11-15 15:53:28 =ERROR REPORT====
Ranch listener http_listener had connection process started with cowboy_protocol:start_link/4 at <0.120.0> exit with reason: {[{reason,{badmatch,<<"1">>}},{mfa,{user_handler,add_user_score,2}},{stacktrace,[{user_handler,add_user_score,2,[{file,"/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/user_handler.erl"},{line,28}]},{cowboy_rest,call,3,[{file,"src/cowboy_rest.erl"},{line,952}]},{cowboy_rest,process_content_type,3,[{file,"src/cowboy_rest.erl"},{line,753}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]},{req,[{socket,#Port<0.4401>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.120.0>},{method,<<"PUT">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},58336}},{host,<<"127.0.0.1">>},{host_info,undefined},{port,8008},{path,<<"/api/users/1">>},{path_info,undefined},{qs,<<>>},{bindings,[{user_id,<<"1">>}]},{headers,[{<<"user-agent">>,<<"curl/7.37.1">>},{<<"host">>,<<"127.0.0.1:8008">>},{<<"accept">>,<<"*/*">>},{<<"content-type">>,<<"application/json">>}]},{meta,[{media_type,{<<"application">>,<<"json">>,[]}},{charset,undefined}]},{body_state,waiting},{buffer,<<>>},{multipart,undefined},{resp_compress,false},{resp_state,waiting},{resp_headers,[{<<"content-type">>,[<<"application">>,<<"/">>,<<"json">>,<<>>]}]},{resp_body,<<>>},{onresponse,undefined}]},{state,[]}],[{cowboy_rest,process_content_type,3,[{file,"src/cowboy_rest.erl"},{line,753}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]}
2014-11-15 16:00:21 =ERROR REPORT====
** Generic server <0.117.0> terminating 
** Last message in was {'$gen_cast',{set_user_score,{<<"user1">>,<<"100">>}}}
** When Server state == #{name => daily_ratings_server,threshold => {ok,20},type => daily,users => {dict,1,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[[<<"user1">>|<<"100">>]],[],[],[],[],[],[],[],[]}}}}
** Reason for termination == 
** {badarith,[{ratings_server,handle_cast,2,[{file,"src/ratings_server.erl"},{line,35}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,599}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
2014-11-15 16:00:21 =ERROR REPORT====
** Generic server <0.115.0> terminating 
** Last message in was {'$gen_cast',{set_user_score,{<<"user1">>,<<"100">>}}}
** When Server state == #{name => weekly_ratings_server,threshold => {ok,20},type => weekly,users => {dict,1,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[[<<"user1">>|<<"100">>]],[],[],[],[],[],[],[],[]}}}}
** Reason for termination == 
** {badarith,[{ratings_server,handle_cast,2,[{file,"src/ratings_server.erl"},{line,35}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,599}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
2014-11-15 16:00:21 =CRASH REPORT====
  crasher:
    initial call: ratings_server:init/1
    pid: <0.117.0>
    registered_name: []
    exception exit: {{badarith,[{ratings_server,handle_cast,2,[{file,"src/ratings_server.erl"},{line,35}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,599}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]},[{gen_server,terminate,6,[{file,"gen_server.erl"},{line,737}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
    ancestors: [ratings_sup,<0.102.0>]
    messages: []
    links: [<0.111.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 224
  neighbours:
2014-11-15 16:00:21 =CRASH REPORT====
  crasher:
    initial call: ratings_server:init/1
    pid: <0.115.0>
    registered_name: []
    exception exit: {{badarith,[{ratings_server,handle_cast,2,[{file,"src/ratings_server.erl"},{line,35}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,599}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]},[{gen_server,terminate,6,[{file,"gen_server.erl"},{line,737}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
    ancestors: [ratings_sup,<0.102.0>]
    messages: []
    links: [<0.111.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 228
  neighbours:
2014-11-15 16:00:21 =ERROR REPORT====
** Generic server <0.113.0> terminating 
** Last message in was {'$gen_cast',{set_user_score,{<<"user1">>,<<"100">>}}}
** When Server state == #{name => total_ratings_server,threshold => {ok,20},type => total,users => {dict,1,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[[<<"user1">>|<<"100">>]],[],[],[],[],[],[],[],[]}}}}
** Reason for termination == 
** {badarith,[{ratings_server,handle_cast,2,[{file,"src/ratings_server.erl"},{line,35}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,599}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
2014-11-15 16:00:21 =CRASH REPORT====
  crasher:
    initial call: ratings_server:init/1
    pid: <0.113.0>
    registered_name: []
    exception exit: {{badarith,[{ratings_server,handle_cast,2,[{file,"src/ratings_server.erl"},{line,35}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,599}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]},[{gen_server,terminate,6,[{file,"gen_server.erl"},{line,737}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
    ancestors: [ratings_sup,<0.102.0>]
    messages: []
    links: [<0.111.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 224
  neighbours:
2014-11-15 16:00:21 =SUPERVISOR REPORT====
     Supervisor: {local,ratings_sup}
     Context:    child_terminated
     Reason:     {badarith,[{ratings_server,handle_cast,2,[{file,"src/ratings_server.erl"},{line,35}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,599}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
     Offender:   [{pid,<0.117.0>},{name,daily_ratings_server},{mfargs,{ratings_server,start_link,[#{name => daily_ratings_server,threshold => {ok,20},type => daily}]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]

2014-11-15 16:00:21 =SUPERVISOR REPORT====
     Supervisor: {local,ratings_sup}
     Context:    child_terminated
     Reason:     {badarith,[{ratings_server,handle_cast,2,[{file,"src/ratings_server.erl"},{line,35}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,599}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
     Offender:   [{pid,<0.115.0>},{name,weekly_ratings_server},{mfargs,{ratings_server,start_link,[#{name => weekly_ratings_server,threshold => {ok,20},type => weekly}]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]

2014-11-15 16:00:21 =SUPERVISOR REPORT====
     Supervisor: {local,ratings_sup}
     Context:    child_terminated
     Reason:     {badarith,[{ratings_server,handle_cast,2,[{file,"src/ratings_server.erl"},{line,35}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,599}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
     Offender:   [{pid,<0.113.0>},{name,total_ratings_server},{mfargs,{ratings_server,start_link,[#{name => total_ratings_server,threshold => {ok,20},type => total}]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]

2014-11-15 16:02:42 =ERROR REPORT====
** Generic server ratings_manager terminating 
** Last message in was {get_rating,{<<"weekly">>}}
** When Server state == #{ratings => {dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[[weekly|<0.115.0>],[daily|<0.117.0>]],[],[],[[total|<0.113.0>]],[],[],[]}}}}
** Reason for termination == 
** {badarg,[{dict,fetch,[<<"weekly">>,{dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[[weekly|<0.115.0>],[daily|<0.117.0>]],[],[],[[total|<0.113.0>]],[],[],[]}}}],[{file,"dict.erl"},{line,130}]},{ratings_manager,handle_call,3,[{file,"src/ratings_manager.erl"},{line,26}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,580}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
2014-11-15 16:02:42 =CRASH REPORT====
  crasher:
    initial call: ratings_manager:init/1
    pid: <0.112.0>
    registered_name: []
    exception exit: {{badarg,[{dict,fetch,[<<"weekly">>,{dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[[weekly|<0.115.0>],[daily|<0.117.0>]],[],[],[[total|<0.113.0>]],[],[],[]}}}],[{file,"dict.erl"},{line,130}]},{ratings_manager,handle_call,3,[{file,"src/ratings_manager.erl"},{line,26}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,580}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]},[{gen_server,terminate,6,[{file,"gen_server.erl"},{line,737}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
    ancestors: [ratings_sup,<0.102.0>]
    messages: []
    links: [<0.111.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 509
  neighbours:
2014-11-15 16:02:42 =SUPERVISOR REPORT====
     Supervisor: {local,ratings_sup}
     Context:    child_terminated
     Reason:     {badarg,[{dict,fetch,[<<"weekly">>,{dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[[weekly|<0.115.0>],[daily|<0.117.0>]],[],[],[[total|<0.113.0>]],[],[],[]}}}],[{file,"dict.erl"},{line,130}]},{ratings_manager,handle_call,3,[{file,"src/ratings_manager.erl"},{line,26}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,580}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
     Offender:   [{pid,<0.112.0>},{name,ratings_manager},{mfargs,{ratings_manager,start_link,[]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]

2014-11-15 16:02:42 =ERROR REPORT====
Ranch listener http_listener had connection process started with cowboy_protocol:start_link/4 at <0.451.0> exit with reason: [{reason,{{badarg,[{dict,fetch,[<<"weekly">>,{dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[[weekly|<0.115.0>],[daily|<0.117.0>]],[],[],[[total|<0.113.0>]],[],[],[]}}}],[{file,"dict.erl"},{line,130}]},{ratings_manager,handle_call,3,[{file,"src/ratings_manager.erl"},{line,26}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,580}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]},{gen_server,call,[{global,ratings_manager},{get_rating,{<<"weekly">>}}]}}},{mfa,{rating_handler,display,2}},{stacktrace,[{gen_server,call,2,[{file,"gen_server.erl"},{line,182}]},{rating_handler,display,2,[{file,"src/handlers/rating_handler.erl"},{line,25}]},{cowboy_rest,call,3,[{file,"src/cowboy_rest.erl"},{line,952}]},{cowboy_rest,set_resp_body,2,[{file,"src/cowboy_rest.erl"},{line,834}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]},{req,[{socket,#Port<0.4922>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.451.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},58444}},{host,<<"127.0.0.1">>},{host_info,undefined},{port,8008},{path,<<"/api/ratings/weekly">>},{path_info,undefined},{qs,<<>>},{bindings,[{type,<<"weekly">>}]},{headers,[{<<"user-agent">>,<<"curl/7.37.1">>},{<<"host">>,<<"127.0.0.1:8008">>},{<<"accept">>,<<"*/*">>},{<<"content-type">>,<<"application/json">>}]},{meta,[{media_type,{<<"application">>,<<"json">>,[]}},{charset,undefined}]},{body_state,waiting},{buffer,<<>>},{multipart,undefined},{resp_compress,false},{resp_state,waiting},{resp_headers,[{<<"content-type">>,[<<"application">>,<<"/">>,<<"json">>,<<>>]}]},{resp_body,<<>>},{onresponse,undefined}]},{state,[]}]
2014-11-15 16:03:35 =ERROR REPORT====
** Generic server ratings_manager terminating 
** Last message in was {get_rating,{"weekly"}}
** When Server state == #{ratings => {dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[[weekly|<0.115.0>],[daily|<0.117.0>]],[],[],[[total|<0.113.0>]],[],[],[]}}}}
** Reason for termination == 
** {badarg,[{dict,fetch,["weekly",{dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[[weekly|<0.115.0>],[daily|<0.117.0>]],[],[],[[total|<0.113.0>]],[],[],[]}}}],[{file,"dict.erl"},{line,130}]},{ratings_manager,handle_call,3,[{file,"src/ratings_manager.erl"},{line,26}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,580}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
2014-11-15 16:03:35 =CRASH REPORT====
  crasher:
    initial call: ratings_manager:init/1
    pid: <0.112.0>
    registered_name: []
    exception exit: {{badarg,[{dict,fetch,["weekly",{dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[[weekly|<0.115.0>],[daily|<0.117.0>]],[],[],[[total|<0.113.0>]],[],[],[]}}}],[{file,"dict.erl"},{line,130}]},{ratings_manager,handle_call,3,[{file,"src/ratings_manager.erl"},{line,26}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,580}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]},[{gen_server,terminate,6,[{file,"gen_server.erl"},{line,737}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
    ancestors: [ratings_sup,<0.102.0>]
    messages: []
    links: [<0.111.0>]
    dictionary: []
    trap_exit: false
    status: running
    heap_size: 610
    stack_size: 27
    reductions: 430
  neighbours:
2014-11-15 16:03:35 =SUPERVISOR REPORT====
     Supervisor: {local,ratings_sup}
     Context:    child_terminated
     Reason:     {badarg,[{dict,fetch,["weekly",{dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[[weekly|<0.115.0>],[daily|<0.117.0>]],[],[],[[total|<0.113.0>]],[],[],[]}}}],[{file,"dict.erl"},{line,130}]},{ratings_manager,handle_call,3,[{file,"src/ratings_manager.erl"},{line,26}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,580}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]}
     Offender:   [{pid,<0.112.0>},{name,ratings_manager},{mfargs,{ratings_manager,start_link,[]}},{restart_type,permanent},{shutdown,2000},{child_type,worker}]

2014-11-15 16:03:35 =ERROR REPORT====
Ranch listener http_listener had connection process started with cowboy_protocol:start_link/4 at <0.135.0> exit with reason: [{reason,{{badarg,[{dict,fetch,["weekly",{dict,3,16,16,8,80,48,{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},{{[],[],[],[],[],[],[],[],[],[[weekly|<0.115.0>],[daily|<0.117.0>]],[],[],[[total|<0.113.0>]],[],[],[]}}}],[{file,"dict.erl"},{line,130}]},{ratings_manager,handle_call,3,[{file,"src/ratings_manager.erl"},{line,26}]},{gen_server,handle_msg,5,[{file,"gen_server.erl"},{line,580}]},{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,237}]}]},{gen_server,call,[{global,ratings_manager},{get_rating,{"weekly"}}]}}},{mfa,{rating_handler,display,2}},{stacktrace,[{gen_server,call,2,[{file,"gen_server.erl"},{line,182}]},{rating_handler,display,2,[{file,"/Users/alexeyfrank/projects/langs/erlang/itech/apps/ratings/src/handlers/rating_handler.erl"},{line,25}]},{cowboy_rest,call,3,[{file,"src/cowboy_rest.erl"},{line,952}]},{cowboy_rest,set_resp_body,2,[{file,"src/cowboy_rest.erl"},{line,834}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]},{req,[{socket,#Port<0.4492>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.135.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},58486}},{host,<<"127.0.0.1">>},{host_info,undefined},{port,8008},{path,<<"/api/ratings/weekly">>},{path_info,undefined},{qs,<<>>},{bindings,[{type,<<"weekly">>}]},{headers,[{<<"user-agent">>,<<"curl/7.37.1">>},{<<"host">>,<<"127.0.0.1:8008">>},{<<"accept">>,<<"*/*">>},{<<"content-type">>,<<"application/json">>}]},{meta,[{media_type,{<<"application">>,<<"json">>,[]}},{charset,undefined}]},{body_state,waiting},{buffer,<<>>},{multipart,undefined},{resp_compress,false},{resp_state,waiting},{resp_headers,[{<<"content-type">>,[<<"application">>,<<"/">>,<<"json">>,<<>>]}]},{resp_body,<<>>},{onresponse,undefined}]},{state,[]}]
2014-11-15 16:04:34 =ERROR REPORT====
Error in process <0.139.0> with exit value: {[{reason,badarg},{mfa,{rating_handler,display,2}},{stacktrace,[{erlang,binary_to_atom,[<<6 bytes>>,"utf8"],[]},{rating_handler,display,2,[{file,"src/handlers/rating_handler.erl"},{line,24}]},{cowboy_rest,call,3,[{file,"src/cowboy_... 

2014-11-15 16:04:34 =ERROR REPORT====
Ranch listener http_listener had connection process started with cowboy_protocol:start_link/4 at <0.139.0> exit with reason: {[{reason,badarg},{mfa,{rating_handler,display,2}},{stacktrace,[{erlang,binary_to_atom,[<<"weekly">>,"utf8"],[]},{rating_handler,display,2,[{file,"src/handlers/rating_handler.erl"},{line,24}]},{cowboy_rest,call,3,[{file,"src/cowboy_rest.erl"},{line,952}]},{cowboy_rest,set_resp_body,2,[{file,"src/cowboy_rest.erl"},{line,834}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]},{req,[{socket,#Port<0.4492>},{transport,ranch_tcp},{connection,keepalive},{pid,<0.139.0>},{method,<<"GET">>},{version,'HTTP/1.1'},{peer,{{127,0,0,1},58510}},{host,<<"127.0.0.1">>},{host_info,undefined},{port,8008},{path,<<"/api/ratings/weekly">>},{path_info,undefined},{qs,<<>>},{bindings,[{type,<<"weekly">>}]},{headers,[{<<"user-agent">>,<<"curl/7.37.1">>},{<<"host">>,<<"127.0.0.1:8008">>},{<<"accept">>,<<"*/*">>},{<<"content-type">>,<<"application/json">>}]},{meta,[{media_type,{<<"application">>,<<"json">>,[]}},{charset,undefined}]},{body_state,waiting},{buffer,<<>>},{multipart,undefined},{resp_compress,false},{resp_state,waiting},{resp_headers,[{<<"content-type">>,[<<"application">>,<<"/">>,<<"json">>,<<>>]}]},{resp_body,<<>>},{onresponse,undefined}]},{state,[]}],[{cowboy_rest,set_resp_body,2,[{file,"src/cowboy_rest.erl"},{line,834}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]}
2014-11-15 16:05:23 =ERROR REPORT====
Error in process <0.130.0> with exit value: {badarg,[{erlang,iolist_size,[[{"user1",300}]],[]},{cowboy_req,reply,4,[{file,"src/cowboy_req.erl"},{line,796}]},{cowboy_rest,respond,3,[{file,"src/cowboy_rest.erl"},{line,973}]},{cowboy_rest,set_resp_body,2,[{file,"src/cowboy_rest.... 

2014-11-15 16:05:23 =ERROR REPORT====
Ranch listener http_listener had connection process started with cowboy_protocol:start_link/4 at <0.130.0> exit with reason: {badarg,[{erlang,iolist_size,[[{"user1",300}]],[]},{cowboy_req,reply,4,[{file,"src/cowboy_req.erl"},{line,796}]},{cowboy_rest,respond,3,[{file,"src/cowboy_rest.erl"},{line,973}]},{cowboy_rest,set_resp_body,2,[{file,"src/cowboy_rest.erl"},{line,849}]},{cowboy_protocol,execute,4,[{file,"src/cowboy_protocol.erl"},{line,428}]}]}
